<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><div class="h2"><h2>Software Requirements</h2><p>Make sure to have these requirements:</p><ul><li>JDK: Java SDK 1.6 or above</li><li>Database: PostgreSQL 8.3 or above</li><li>Maven: Maven 2.0.6 or above</li><li>Subversion Client: any svn client such as CollabNet svn&nbsp;client, or Elicpse IDE</li><li>Application server (optional): Any</li><li>Operating System: all major operating systems are supported.</li></li /></ul><h2>Installation from Source Code</h2><p>A subversion client such as Collabnet Subversion Client, Eclipse IDE, or any other type of subversion client is required to download the OpenXDS source code. The following section illustrates how to use the Collabnet Subversion Client and Eclipse IDE to download and build the source code, respectively. </p><p><strong>1. Build Source Code Using Collabnet Subversion Client</strong></p><p>&nbsp;</p><ul><li>Download and install <a href="http://maven.apache.org/download.html">Maven</a> 2.0.6 or above</li><li>Download and install <a href="http://www.collab.net/downloads/subversion">Collabnet Subversion Client</a></li><li>Add your OHT login credentials to the maven setting, so that Maven can download the required libraries from the OpenXDS internal repository automatically using your user and password <ul><li>Open or create a new <i>settings.xml</i> file under the .m2 directory of your local maven repository, which is by default under your operating system user home directory</li><li>In settings.xml, add the following <i>servers</i> tag to the parent <i>settings</i> tag <p><code><settings xmlns="http://maven.apache.org/SETTINGS/1.0.0" /><server />&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; <br />&nbsp;xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;<br />&nbsp;xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0<br />&nbsp;http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;<br />&nbsp;&nbsp;&lt;servers&gt;<br />&nbsp;&nbsp;&nbsp;&lt;server&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&gt;openxds&lt;/id&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;username&gt;username&lt;/username&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;password&gt;password&lt;/password&gt;<br />&nbsp;&nbsp;&nbsp;&lt;/server&gt;<br />&nbsp;&nbsp;&lt;/servers&gt;<br />&lt;/settings&gt;</password /></code></p></li><li>Replace the username and password with your OHT user name and password</li><li>Save the change and close the file</li></ul></li><li>Create a work directory. At a command line, go to that work directory, and execute the following command to get OpenXDS 1.0 source code: <p><code>svn checkout <a href="https://openxds.projects.openhealthtools.org/svn/openxds/tags/openxds-1.0-20100309%20openxds">https://openxds.projects.openhealthtools.org/svn/openxds/tags/openxds-1.0-20100309 openxds</a></code></p><p>To check out the latest code from the trunk, use this command:</p><p><code>svn checkout https://openxds.projects.openhealthtools.org/svn/openxds/trunk/openxds openxds</code></p></li><li>At the same command line, go to the openxds directory (the one containing a pom.xml file), and execute <i>mvn install -DskipTests</i> to build the source code. This usually takes a few minutes to complete, so just be patient</li><li>When the above step is done, a build directory (referred to as OpenXDS_HOME in the following sections) is generated at the root of the work directory</li><li>Go to the <a href="https://openxds.projects.openhealthtools.org/cn-project-pages/Documentation/#_setupdb">Set Up Databases</a> section to configure the databases</li><li>If you wish, go to the OpenXDS_HOME/conf/actors directory to modify the actor configuration. See more information in the <a href="https://openxds.projects.openhealthtools.org/servlets/ProjectProcess?documentContainer=c2__Actor%20Configuration&amp;viewFromEditor=true">Actor Configuration</a> section</li><li>Proceed to the <a href="https://openxds.projects.openhealthtools.org/cn-project-pages/Documentation/#_runserver">Run OpenXDS servers</a> section for execution</li></ul><p>&nbsp;</p><p><strong>2. Build Source Code Using Eclipse IDE</strong></p><p>&nbsp;</p><ul><li>Download and install <a href="http://maven.apache.org/download.html">Maven</a> 2.0.6 or above</li><li>Download and install <a href="http://www.eclipse.org/downloads/packages/release/ganymede/sr2">Eclipse</a> 3.4 or 3.5 JEE version</li><li>Download and install Maven Eclipse plug-in <a href="http://m2eclipse.codehaus.org/">m2eclipse</a></li><li>Check out the OpenXDS source code from the svn repository <ul><li>Create a new work space</li><li>Install a JDK 1.6 by selecting Window -&gt; Preferences -&gt; Java -&gt; Installed JREs -&gt; Add -&gt; Standard VM. Make sure to select this JDK as the default Standard VM in the workspace</li><li>Use a Maven Checkout Wizard by selecting New -&gt; Checkout Maven Projects from SCM</li><li>On the <i>Checkout as Maven project from SCM</i> screen and in the SCM URL field, select svn and enter <p><code>https://openxds.projects.openhealthtools.org/svn/openxds/trunk/openxds</code></p><p>to download the latest source code from the trunk. Alternatively, you can download a stable releasing tag or branch.</p></li><li>Click the Finish button to download the source code and the maven libraries. You may be prompted to enter your OHT login and password. An OpenXDS Eclipse project with all its child modules will be created. It will take a while to compile</li><li>If you see a validation error from the openxds-web module, simply disable the XML schema validator and the XML Validator from Window -&gt; Preferences -&gt; Validation</li></ul></li><li>At a command line, go to the openxds directory (the one containing a pom.xml file), and execute <i>mvn install -DskipTests</i> to build the source code. This usually takes a few minutes to complete</li><li>When the above step is done, a build directory (referred to as OpenXDS_HOME in the following sections) is generated at the root of the work space</li><li>Go to the <a href="https://openxds.projects.openhealthtools.org/cn-project-pages/Documentation/#_setupdb">Set Up Databases</a> section to configure the databases</li><li>If you wish, go to the OpenXDS_HOME/conf/actors directory to modify the actor configuration. See more information in the <a href="https://openxds.projects.openhealthtools.org/servlets/ProjectProcess?documentContainer=c2__Actor%20Configuration&amp;viewFromEditor=true">Actor Configuration</a> section</li><li>Proceed to the <a href="https://openxds.projects.openhealthtools.org/cn-project-pages/Documentation/#_runserver">Run OpenXDS servers</a> section for execution</li></ul><p>&nbsp;</p><h2><a name="#_setupdb"></a>Set Up Databases</h2><p>As of this writing, the current OpenXDS version only supports PostgreSQL (the tested version is PostsgresSQL 8.3) although database neutrality will be available in future releases</p><ul><li>Download and install PostgreSQL from <a href="http://www.postgresql.org/">here</a></li><li>Create openxds database <ul><li>Create a new openxds database and a database user named openxds, and assign the user to the database. The default user and password are both openxds. If different, go to the <strong><i>openxds.properties</i></strong>, <strong><i>omar.properties</i></strong> and <strong><i>repository.jdbc.cfg.xml</i></strong> files under the OpenXDS_HOME directory (If running in an application server, these files are located in the WEB-INF/classes folder of the openxds web application), and change the relevant database connection properties</li><li>Run the <strong>OpenXDS_HOME/misc/create_database_schema.sql</strong> SQL script to create tables and pre-load some data</li></ul></li><li>Create log2 database <ul><li>Create a new log2 database and a new database user/password: logs/xdslogs, and assign this user to the log2 database. If the database URL, user or password is different from the default, make sure to update the logs.db properties in the openxds.properties file</li></ul></li></ul><h2><a name="#_runserver"></a>Run OpenXDS Servers</h2><p>The OpenXDS Servers including Document Repository, Document Registry, Initiating Gateway, and Responding Gateway can be run in either a stand-alone mode or in an application server. They also can be run separately in different machines and/or different JVMs</p><h3>Run in a Stand Alone Mode</h3><ul><li>To execute the OpenXDS servers, at a command line, go to the OpenXDS_HOME directory, and execute the following command <p><strong><i>java -jar openxds.jar</i></strong></p>The console message will indicate whether each server is started or not </li><li>If you did not change the actor configuration files, the default XDS connection information is as follows (replace localhost with your server ip): <ul><li>Document Submission (ITI-41): <strong>http://localhost:8020/axis2/services/xdsrepositoryb</strong></li><li>Document Stored Query (ITI-18): <strong>http://localhost:8010/axis2/services/xdsregistryb</strong></li><li>Document Retrieval (ITI-43): <strong>http://localhost:8020/axis2/services/xdsrepositoryb</strong></li></ul></li><li>Proceed to the <a href="https://openxds.projects.openhealthtools.org/cn-project-pages/Documentation/#_testing">Testing</a> section to verify the installation</li></ul><h3>Deployment and Run in an Application Server</h3><p>The OpenXDS servers can also run in an application server</p><p><strong>1. Deployment</strong> </p><ul><li>To deploy the OpenXDS web application, go to the OpenXDS_HOME/misc directory, copy and unwrap the openxds-web.war file to your application server deployment folder</li><li>Go to the openxds.properties file under the WEB-INF/classes folder, and uncomment the <i>ihe.actors.dir</i>, <i>axis2.repo.dir</i> and <i>xds.schema.dir</i> properties to use the ones for war, and comment out the other corresponding values</li><li>If you have changed the database default connection parameters such as database URL, user and password, make sure you change them in the <i>openxds.properties</i>, <i>omar.properties</i> and <i>repository.jdbc.cfg.xml</i> files under the WEB-INF/classes folder</li><li>If you wish, create an actors directory by copying the OpenXDS_HOME/conf/actors directory, and modify the actor configuration based on your needs. For more information see <a href="https://openxds.projects.openhealthtools.org/cn-project-pages/Documentation/">Actor Configuration</a></li></ul><p>&nbsp;</p><p><strong>2. Start up the OpenXDS servers</strong> </p><ul><li>Start up your application server</li><li>Open a browser (currently IE is supported) on the machine where your application server runs, go to this URL <strong>http://localhost:<port /></port />/openxds-web/</strong> (replacing <port /></port />with the actual port for your application server), and click the Configuration tab.</li><li>In the Load configuration file text box, browse or enter the path of the actors/IheActors.xml file created in the above deployment section, and click the <strong>LoadActors</strong> button</li><li>Select the check boxes before the actors that you would like to run, and click the Start button. The messages on the console will indicate whether each actor is started successfully or not</li><li>If you did not change the actor configuration files, the default XDS connection information is as follows (replace localhost with your server ip): <ul><li>Document Submission (ITI-41): <strong>http://localhost:8020/axis2/services/xdsrepositoryb</strong></li><li>Document Stored Query (ITI-18): <strong>http://localhost:8010/axis2/services/xdsregistryb</strong></li><li>Document Retrieval (ITI-43): <strong>http://localhost:8020/axis2/services/xdsrepositoryb</strong></li></ul></li><li>Proceed to the <a href="https://openxds.projects.openhealthtools.org/cn-project-pages/Documentation/#_testing">Testing</a> section to verify the installation</li></ul><p>&nbsp;</p><h2><a name="#_testing"></a>Testing</h2><p>There are two approaches to test the OpenXDS servers: <br />1. Integration test clients <br />2. NIST xdstest tool.</p><p><strong>Using the Integration Test Clients</strong></p><p>You will need to get the source code to run JUnit tests. The integration test clients are available from the openxds-core module. Use <i>ProvideAndRegisterDocumentSetTest</i> JUnit class to test document submission, <i>RegistryStoredQueryTest</i> JUnit class to test stored query, and <i>RetrieveDocumentSetTest</i> JUnit class to test document retrieval</p><p>The testing data and configuration files are in the <i>src/test/resources</i> directory</p><p>The following properties need to be configured in the <i>test.properties</i> file</p><p><strong>RepositoryUrl</strong> - the url used for the ProvideAndRegisterDocumentSet-b and RetrieveDocumentSet transactions</p><p><strong>RegistryUrl</strong> - the url for the RegisterDocumentSet-b transaction </p><p><strong>pixRegistryHostName</strong> - the host address or ip of the PIX Registry server of OpenXDS</p><p><strong>pixRegistryPort</strong> - the port of the PIX Registry server of OpenXDS</p><p><strong>patientId</strong> - the default test patient id</p><p><strong>assigningAuthority</strong> - the default assigning authority of the test patients</p><p><strong>validatePatient</strong> - true or false. Whether to validate the patient upon document submission <br />(Note: If validatePatient is set to true, the test clients must be on the same machine running the OpenXDS servers. We will provide remote testing capabilities in future versions.)</p><p>Be sure to start the OpenXDS repository and registry servers before executing the JUnit tests</p><p>To run document submission tests, execute the test scenarios in <i>ProvideAndRegisterDocumentSetTest</i> including</p><p>1. Test single document submission<br />2. Test multiple document submission<br />3. Test adding a document to a folder<br />4. Test adding a document addendum<br />5. Test document replacement<br />6. Test document transformation<br />7. Test document transformation with replacement </p><p>To run document stored query tests, execute the test scenarios in <i>RegistryStoredQueryTest</i> including</p><p>1. Test finding documents <br />2. Test finding folders<br />3. Test getting associations <br />4. Test getting documents and associations<br />5. Test get folders<br />6. Test get folders and contents<br />7. Test get folder for documents<br />8. Test get related documents<br />9. Test get submission set and contents<br />10. Test get submission sets<br />11. Test submission sets </p><p>To run <i>RetrieveDocumentSet</i> test, execute the <i>testRetrieveDocumentSetb</i> JUnit test method in <i>RetrieveDocumentSetTest</i></p><p><strong>Using the NIST XDS Toolkit</strong></p><p>The NIST XDS Toolkit can be used as a test client to test the OpenXDS servers. To set up and run the NIST xdstest tool, please refer to the online resources here: <a href="http://ihewiki.wustl.edu/wiki/index.php/XDS_Main_Page#XDS_Toolkit">NIST XDS Toolkit</a></p><h2>Resources</h2><p>OpenXDS Project Resources</p><ul><li><a href="http://www.ihe.net/">IHE</a></li><li><a href="https://openxds.projects.openhealthtools.org/servlets/ProjectIssues">OpenXDS Issue Tracking</a></li><li><a href="https://openxds.projects.openhealthtools.org/servlets/ProjectProcess?pageID=nhwkge">OpenXDS Releases</a>&nbsp;</li></ul></strong /><p>&nbsp;</p></div>